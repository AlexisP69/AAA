{{define "completePost"}}
<dialog id="Form{{.Id}}" class="detail">

  <form class="close" method="dialog">
    <button value="cancel">&times;</button>
  </form>
  <div class="tt">
    <h4>{{.Title}}</h4>
  </div>

  <div class="grandRectangle">
    <p>{{.Name}} </p>
  </div>
  <div class="petitRectangle">
    <h4>{{.Description}}</h4>
  </div>
  <div class="basRectangle">
    <img id="like" src="../Static/like.png"></img>
    <img id="dislike" src="../Static/dislike.png"></img>
    <img id="commentaire" src="../Static/commentaire.png"></img>
    <div class="comments">
      <textarea id="infos{{.Id}}" placeholder="Write an Comment"></textarea>
      <button onclick="newComment()" class="com" id="com{{.Id}}">Comment</button>
      <div id="yo{{.Id}}"></div>
    </div>
  </div>
</dialog>

<script>
  document.getElementById("com{{.Id}}").addEventListener("click", () => {
    let input = document.getElementById("infos{{.Id}}").value;
    const d = document.getElementById("yo{{.Id}}")
    let postId = "{{.Id}}"
    let name = "{{.Name}}"
    console.log(d)
    d.innerHTML +=
      `
      <div class="comment">
        <span>
        ${name} :  ${input}
        </span>
      </div>
      `
    console.log(input) //A EFFACER

    fetch("/newComments",
      {
        method: "POST",
        headers: {
          "content-type": "application/json"
        },
        body: JSON.stringify({
          input: input,
          postid : postId
        })
      }).then((res) => {
        console.log(res);
        return res.json()
      })
      .then((res) => {
        const abs = document.getElementById("absolute")

        abs.innerText = res.test
      })
  })
// newElement.innerHTML += "Nom de l'utilisateur"+" "+":"+" "+ info

</script>
{{end}}