{{define "completePost"}}
<dialog id="Form{{.Post.Id}}" class="detail">

  <form class="close" method="dialog">
    <button value="cancel">&times;</button>
  </form>
  <div class="tt">
    <h4>{{.Post.Title}}</h4>
  </div>

  <div class="grandRectangle">
    <p>{{.Post.Name}} </p>
  </div>
  <div class="petitRectangle">
    <h4>{{.Post.Description}}</h4>
  </div>
  <div class="basRectangle">
    <img id="like" src="../Static/like.png"></img>
    <img id="dislike" src="../Static/dislike.png"></img>
    <img id="commentaire" src="../Static/commentaire.png"></img>
    <div class="comments">
      <textarea id="infos{{.Post.Id}}" placeholder="Write an Comment"></textarea>
      <button onclick="newComment()" class="com" id="com{{.Post.Id}}">Comment</button>
      <div id="yo{{.Post.Id}}">
        {{range .EveryComments}}
          <div class="comment">
            <span>
              {{.Name}}:  {{.Commentaire}} 
            </span>
          </div>
        {{end}}
      </div>
    </div>
  </div>
</dialog>

<script>
  document.getElementById("com{{.Post.Id}}").addEventListener("click", () => {
    let input = document.getElementById("infos{{.Post.Id}}").value;
    const d = document.getElementById("yo{{.Post.Id}}")
    let postId = "{{.Post.Id}}"
    let name = "You"
    console.log(d)
    d.innerHTML +=
      `
      <div class="comment">
        <span>
        ${name} : ${input}
        </span>
      </div>
      `
    console.log(input) //A EFFACER

    fetch("/newComments",
      {
        method: "POST",
        headers: {
          "content-type": "application/json"
        },
        body: JSON.stringify({
          input: input,
          postid : postId
        })
      }).then((res) => {
        console.log(res);
        return res.json()
      })
      .then((res) => {
        const abs = document.getElementById("absolute")

        abs.innerText = res.test
      })
      .catch((err) => console.Error(err))
  })
// newElement.innerHTML += "Nom de l'utilisateur"+" "+":"+" "+ info
function none(){
document.getElementById("com{{.Post.Id}}").style.display = 'none';
document.getElementById("infos{{.Post.Id}}").style.display = 'none';
}
</script>
{{end}}